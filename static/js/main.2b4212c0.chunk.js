(this.webpackJsonploex_2=this.webpackJsonploex_2||[]).push([[0],{12:function(t,e,n){t.exports={nav:"Navbar_nav__1jbKU",item:"Navbar_item__3iNEN",activeLink:"Navbar_activeLink__EVxoS"}},127:function(t,e,n){"use strict";e.a=n.p+"static/media/madara.899e32dc.jpg"},128:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var r=n(28),a=n(3),s="SEND_MESSAGE",c={dialogs:[{id:1,name:"loex"},{id:2,name:"svloex"},{id:3,name:"sveta"},{id:4,name:"victa"},{id:5,name:"lera"},{id:6,name:"god"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is you loex?"},{id:3,message:"Yo"}]};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;if(e.type===s){var n=e.newMessageBody;return Object(a.a)(Object(a.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:4,message:n}])})}return t};var i=function(t){return{type:s,newMessageBody:t}}},129:function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return x}));var r=n(8),a=n.n(r),s=n(14),c=n(28),i=n(3),o=n(17),u="FOLOLOW",l="UNFOLLOW",d="SET_USERS",j="Current_Upd",f="TotalUsersCountUpd",p="Toggle_is_fetch",b="Toggle_is_fetch_process",O={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:return Object(i.a)(Object(i.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userid?Object(i.a)(Object(i.a)({},t),{},{followed:!0}):t}))});case l:return Object(i.a)(Object(i.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userid?Object(i.a)(Object(i.a)({},t),{},{followed:!1}):t}))});case d:return Object(i.a)(Object(i.a)({},t),{},{users:e.users});case j:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.p});case f:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.total});case p:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case b:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(c.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}};var h=function(t){return{type:p,isFetching:t}},m=function(t,e){return{type:b,isFetching:t,userId:e}},v=function(t,e){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(h(!0)),r({type:j,p:t}),n.next=4,o.c.getUsers(t,e);case 4:s=n.sent,r(h(!1)),r((c=s.items,{type:d,users:c})),r((a=s.totalCount,{type:f,total:a}));case 8:case"end":return n.stop()}var a,c}),n)})));return function(t){return n.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(m(!0,t)),e.next=3,o.c.follow(t);case 3:0===e.sent.data.resultCode&&n({type:u,userid:t}),n(m(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(m(!0,t)),e.next=3,o.c.unfollow(t);case 3:0===e.sent.data.resultCode&&n({type:l,userid:t}),n(m(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},133:function(t,e,n){t.exports={item:"Post_item__3fhyR"}},134:function(t,e,n){t.exports={discriptionBlock:"ProfileInfo_discriptionBlock__2OJPE",span1:"ProfileInfo_span1__3yOHW"}},17:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return i}));var r=n(132),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"53fa99d4-8150-4522-8d4c-7aea4ce46376"}}),s={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(t,"&count=").concat(e),{withCredentials:!0}).then((function(t){return t.data}))},follow:function(t){return a.post("follow/".concat(t))},unfollow:function(t){return a.delete("follow/".concat(t))},getProfile:function(t){return console.warn("Obsolete method. Please use profileAPI object"),c.getProfile(t)}},c={getProfile:function(t){return a.get("profile/".concat(t))},getStatus:function(t){return a.get("/profile/status/".concat(t))},updateStatus:function(t){return a.put("/profile/status/",{status:t})}},i={me:function(){return a.get("auth/me")},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return a.delete("auth/login")}}},178:function(t,e,n){},179:function(t,e,n){},337:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),s=n(59),c=n.n(s),i=(n(178),n(34)),o=n(35),u=n(37),l=n(36),d=(n(179),n(19)),j=n(12),f=n.n(j),p=n(1),b=function(t){return Object(p.jsxs)("nav",{className:f.a.nav,children:[Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/https://svloex.github.io/profile",activeClassName:f.a.activeLink,children:"Profile"})}),Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/dialogs",activeClassName:f.a.activeLink,children:"Message"})}),Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/news",activeClassName:f.a.activeLink,children:"News"})}),Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/music",activeClassName:f.a.activeLink,children:"Music"})}),Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/settings",activeClassName:f.a.activeLink,children:"Settings"})}),Object(p.jsx)("div",{className:f.a.item,children:Object(p.jsx)(d.a,{to:"/users",activeClassName:f.a.activeLink,children:"Users"})})]})},O=n(7),h=n(3),m=n(18),v=n(25),g=n(8),x=n.n(g),w=n(14),y=n(28),_=n(17),k="ADD_POST",P="SetUserProfile",S="SET_STATUS",C={posts:[{id:1,message:"hi,how are you?",likesCount:23},{id:2,message:"it`s my first post",likesCount:2}],UserProfile:null,status:""},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:var n={id:5,message:e.newPostText,likesCount:0};return Object(h.a)(Object(h.a)({},t),{},{newPostText:"",posts:[].concat(Object(y.a)(t.posts),[n])});case P:return Object(h.a)(Object(h.a)({},t),{},{UserProfile:e.profile});case S:return Object(h.a)(Object(h.a)({},t),{},{status:e.status});default:return t}},U=function(t){return{type:S,status:t}},A=n(115),I=n.n(A),E=n(101),T=n.n(E),z=n(86),L=n.n(z),B=n(133),M=n.n(B),R=function(t){return Object(p.jsxs)("div",{className:M.a.item,children:[Object(p.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuujtWtz1B7w9EfHXAZyAUVoeAARbDgp7pGg&usqp=CAU",alt:""}),t.message,Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:"like"})," ",t.likesCount]})]})},F=n(65),D=n(90),H=Object(F.a)(10),W=I()({form:"ProfileAddNewPostForm"})((function(t){return Object(p.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(p.jsx)("div",{children:Object(p.jsx)(T.a,{component:D.b,name:"newPostText",validate:[F.b,H],placeholder:"Post message"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add post"})})]})})),J=function(t){console.log("render this");var e=Object(y.a)(t.posts).reverse().map((function(t){return Object(p.jsx)(R,{message:t.message,likesCount:t.likesCount},t.id)}));return Object(p.jsxs)("div",{className:L.a.postsBlock,children:[Object(p.jsx)("h3",{children:"my posts"}),Object(p.jsx)(W,{onSubmit:function(e){t.addPost(e.newPostText)}}),Object(p.jsx)("div",{className:L.a.posts,children:e})]})},V=Object(m.connect)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(e){t(function(t){return{type:k,newPostText:t}}(e))}}}))(J),q=n(134),G=n.n(q),K=n(60),Y=n(83),Z=function(t){var e=Object(r.useState)(t.status),n=Object(Y.a)(e,2),a=n[0],s=n[1],c=Object(r.useState)(!0),i=Object(Y.a)(c,2),o=i[0],u=i[1];Object(r.useEffect)((function(){s(t.status)}),[t.status]);var l=function(e){u(!!e),!0!==o&""!==a&&t.updateStatus(a)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{children:o?Object(p.jsx)("span",{onDoubleClick:function(){l(!1)},children:t.status||"--------"}):Object(p.jsx)("input",{autoFocus:!0,onBlur:function(){l(!0)},onChange:function(t){s(t.target.value)},value:a})})})},X=a.a.memo((function(t){return console.log("render info"),t.profile?Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:G.a.discriptionBlock,children:[Object(p.jsx)("img",{src:t.profile.photos.large,alt:"e"}),Object(p.jsx)(Z,{status:t.status,updateStatus:t.updateStatus}),Object(p.jsxs)("p",{children:["fullName: ",t.profile.fullName]}),Object(p.jsxs)("p",{children:["aboutMe: ",t.profile.aboutMe]}),Object(p.jsxs)("a",{href:"https://"+t.profile.contacts.vk,children:["Vk: ",t.profile.contacts.vk]})]})}):Object(p.jsx)(K.a,{})})),Q=function(t){return Object(p.jsxs)("div",{children:[Object(p.jsx)(X,{profile:t.profile,status:t.status,updateStatus:t.updateStatus}),Object(p.jsx)(V,{})]})},$=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"render",value:function(){return Object(p.jsx)(Q,Object(h.a)(Object(h.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),n}(a.a.Component),tt=Object(v.compose)(Object(m.connect)((function(t){return{profile:t.profilePage.UserProfile,status:t.profilePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),{getUserProfile:function(t){return function(){var e=Object(w.a)(x.a.mark((function e(n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.c.getProfile(t);case 2:r=e.sent,n((a=r.data,{type:P,profile:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},getStatus:function(t){return function(){var e=Object(w.a)(x.a.mark((function e(n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.b.getStatus(t);case 2:r=e.sent,n(U(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateStatus:function(t){return function(){var e=Object(w.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(U(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),O.withRouter)($),et=n(87),nt=n.n(et),rt=n(127),at=function(t){return Object(p.jsxs)("header",{className:nt.a.header,children:[Object(p.jsx)("img",{src:rt.a,alt:""}),Object(p.jsx)("div",{className:nt.a.loginBlock,children:t.isAuth?Object(p.jsxs)("div",{children:[t.login," - ",Object(p.jsx)("button",{onClick:t.logout,children:"Logout"})," "]}):Object(p.jsx)(d.a,{to:"/login",children:"Login"})})]})},st=n(39),ct=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(p.jsx)(at,Object(h.a)(Object(h.a)({},this.props),{},{logout:this.props.logout}))}}]),n}(a.a.Component),it=Object(m.connect)((function(t){return{login:t.auth.login,isAuth:t.auth.isAuth}}),{logout:st.d})(ct),ot="INITIALIZED_SUCCESS",ut={initialized:!1},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;return e.type===ot?Object(h.a)(Object(h.a)({},t),{},{initialized:!0}):t},dt=n(136),jt=n(128),ft=n(129),pt=n(135),bt=n(130),Ot=Object(v.combineReducers)({profilePage:N,dialogsPage:jt.a,usersPage:ft.a,auth:st.a,form:bt.a,app:lt}),ht=Object(v.createStore)(Ot,Object(v.applyMiddleware)(pt.a));window.store=ht;var mt=ht,vt=a.a.lazy((function(){return n.e(5).then(n.bind(null,351))})),gt=a.a.lazy((function(){return n.e(8).then(n.bind(null,347))})),xt=a.a.lazy((function(){return n.e(6).then(n.bind(null,348))})),wt=a.a.lazy((function(){return Promise.all([n.e(3),n.e(7)]).then(n.bind(null,349))})),yt=a.a.lazy((function(){return n.e(4).then(n.bind(null,350))})),_t=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(p.jsxs)("div",{className:"app_wrapper",children:[Object(p.jsx)(it,{}),Object(p.jsx)(b,{}),Object(p.jsxs)("div",{className:"app_wrapper_content",children:[Object(p.jsx)("div",{children:Object(p.jsxs)(r.Suspense,{fallback:Object(p.jsx)("div",{children:'"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"'}),children:[Object(p.jsx)(O.Route,{path:"/dialogs",render:function(){return Object(p.jsx)(vt,{})}})," ",Object(p.jsx)(O.Route,{path:"/profile:userId?",render:function(){return Object(p.jsx)(tt,{})}})," ",Object(p.jsx)(O.Route,{path:"/users",render:function(){return Object(p.jsx)(yt,{})}})," ",Object(p.jsx)(O.Route,{path:"/settings",render:function(){return Object(p.jsx)(gt,{})}})," ",Object(p.jsx)(O.Route,{path:"/music",render:function(){return Object(p.jsx)(xt,{})}})," ",Object(p.jsx)(O.Route,{path:"/login",render:function(){return Object(p.jsx)(wt,{})}})," "]})})," "]})," "]}):Object(p.jsx)(K.a,{})}}]),n}(a.a.Component),kt=Object(v.compose)(O.withRouter,Object(m.connect)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(){var t=Object(w.a)(x.a.mark((function t(e){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(st.b)());case 2:e({type:ot});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(_t),Pt=function(t){return Object(p.jsxs)(dt.BrowserRouter,{children:[Object(p.jsx)(m.Provider,{store:mt,children:Object(p.jsx)(kt,{})})," "]})};c.a.render(Object(p.jsx)(Pt,{}),document.getElementById("root"))},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var r=n(8),a=n.n(r),s=n(14),c=n(3),i=n(80),o=n(17),u="SET_USER_DATA",l={id:null,email:null,login:null,isAuth:!1};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;return e.type===u?Object(c.a)(Object(c.a)({},t),e.payload):t};var d=function(t,e,n,r){return{type:u,payload:{id:t,email:e,login:n,isAuth:r}}},j=function(){return function(t){return o.a.me().then((function(e){if(0===e.data.resultCode){var n=e.data.data,r=n.id,a=n.email,s=n.login;t(d(r,a,s,!0))}}))}},f=function(t,e,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var c,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.login(t,e,n);case 2:0===(c=r.sent).data.resultCode?s(j()):(u=c.message>0?c.message[0]:"Some error",s(Object(i.a)("login",{_error:"".concat(u)})));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},p=function(){return function(){var t=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.logout();case 2:0===t.sent.data.resultCode&&e(d(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},60:function(t,e,n){"use strict";var r=n(1);e.a=function(){return Object(r.jsx)("div",{className:"preload",children:Object(r.jsx)("img",{className:"pre",src:"https://i.gifer.com/8UJH.gif",alt:""})})}},65:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r=function(t){if(!t)return"Field is required"},a=function(t){return function(e){if(e.length>t)return"Max length is ".concat(t," symbols")}}},81:function(t,e,n){t.exports={formControl:"formControl_formControl__1IPaE",error:"formControl_error__31V-O",formSummaryError:"formControl_formSummaryError__2frOW"}},86:function(t,e,n){t.exports={postsBlock:"MyPosts_postsBlock__2P9iL",posts:"MyPosts_posts__1j7-N"}},87:function(t,e,n){t.exports={header:"Header_header__DzlTw",loginBlock:"Header_loginBlock__WsufW"}},90:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return f}));var r=n(3),a=n(62),s=(n(0),n(81)),c=n.n(s),i=n(1),o=["input","meta"],u=["input","meta"],l=["input","meta"],d=function(t){t.input;var e=t.meta,n=Object(a.a)(t,o),r=e.touched&&e.error;return Object(i.jsxs)("div",{className:c.a.formControl+" "+(r?c.a.error:""),children:[Object(i.jsx)("div",{children:n.children}),r&&Object(i.jsx)("span",{children:e.error})]})},j=function(t){var e=t.input,n=(t.meta,Object(a.a)(t,u));return Object(i.jsxs)(d,Object(r.a)(Object(r.a)({},t),{},{children:[" ",Object(i.jsx)("textarea",Object(r.a)(Object(r.a)({},e),n))," "]}))},f=function(t){var e=t.input,n=(t.meta,Object(a.a)(t,l));return Object(i.jsxs)(d,Object(r.a)(Object(r.a)({},t),{},{children:[" ",Object(i.jsx)("input",Object(r.a)(Object(r.a)({},e),n))," "]}))}}},[[337,1,2]]]);
//# sourceMappingURL=main.2b4212c0.chunk.js.map